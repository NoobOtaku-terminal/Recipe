# PRODUCTION ENVIRONMENT CONFIGURATION
# Copy this file to .env on your Azure VM
# NEVER commit .env to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_USER=recipeuser
POSTGRES_PASSWORD=0401Recipe
POSTGRES_DB=recipedb
DATABASE_URL=postgresql://recipeuser:0401Recipe@postgres:5432/recipedb

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================
NODE_ENV=production
JWT_SECRET=aPyKZAiHmMTp39QjuRXQvUv2T1MAsDMH0605sm2Pfpy
JWT_EXPIRY=7d
PORT=3000

# Media storage
MEDIA_UPLOAD_PATH=/app/uploads
MAX_FILE_SIZE=10485760  # 10MB in bytes

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100    # Max requests per window

# CORS Configuration
# Since nginx serves both frontend and API from the same domain,
# CORS isn't strictly needed (same-origin). However, set it for:
# - Mobile apps, third-party clients, or future separate domains
# 
# Options:
# 1. Same domain (recommended): Use the domain you access the app from
CORS_ORIGIN=*
#
# 2. Testing with IP: Use your Azure VM public IP
# CORS_ORIGIN=http://YOUR_AZURE_IP
#
# 3. Development/Allow all (NOT for production):
# CORS_ORIGIN=*
#
# 4. Multiple domains (comma-separated):
# CORS_ORIGIN=https://yourdomain.com,https://app.yourdomain.com

# Logging
LOG_LEVEL=warn  # Use 'warn' or 'error' in production

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# If using custom domain, set to https://yourdomain.com/api
# If using Azure VM IP, set to http://YOUR_AZURE_IP/api
VITE_API_URL=/api
VITE_APP_ENV=production

# =============================================================================
# NGINX CONFIGURATION
# =============================================================================
HTTP_PORT=80
HTTPS_PORT=443

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
# NEVER seed database in production!
SEED_DATABASE=false

# Disable debug logging
DEBUG=false

# =============================================================================
# MONITORING (Optional)
# =============================================================================
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=

# =============================================================================
# QUICK SETUP GUIDE
# =============================================================================
# 1. Generate strong password:
#    openssl rand -base64 16
#
# 2. Generate JWT secret:
#    openssl rand -base64 32
#
# 3. Replace CHANGE_THIS_TO_STRONG_PASSWORD with the generated password
#    (in both POSTGRES_PASSWORD and DATABASE_URL)
#
# 4. Replace GENERATE_WITH_openssl_rand_base64_32 with generated JWT secret
#
# 5. Set CORS_ORIGIN to your actual domain
#
# 6. If using custom domain, update VITE_API_URL
#
# 7. Deploy:
#    docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
